<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily Temperatures Visualization</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    .cell {
        @apply border rounded px-2 py-1 text-center;
        min-width: 32px;
    }
    .highlight {
        background-color: #fde047; /* yellow */
    }
    .stack-item {
        @apply px-3 py-1 bg-blue-100 border rounded text-center;
    }
</style>
</head>
<body class="bg-gray-100 p-6">

<h1 class="text-3xl font-bold mb-6">üå°Ô∏è LeetCode 739 ‚Äî Daily Temperatures</h1>

<div class="mb-4">
    <label class="font-medium">Input temperatures (comma-separated):</label>
    <input id="inputTemps" type="text"
        class="border p-2 rounded w-full mt-1"
        placeholder="e.g. 73, 74, 75, 71, 69, 72, 76, 73">
</div>

<button onclick="startVisualization()"
        class="px-4 py-2 bg-blue-600 text-white rounded mb-6">
    Load Temperatures
</button>

<!-- Controls -->
<div class="flex gap-4 mb-6">
    <button onclick="prevStep()"
        class="px-4 py-2 bg-gray-300 rounded">‚¨Ö Prev</button>
    <button onclick="nextStep()"
        class="px-4 py-2 bg-gray-300 rounded">Next ‚û°</button>
    <div class="text-lg font-semibold ml-4">
        Step: <span id="stepCounter">0</span>
    </div>
</div>

<!-- Visualization Panels -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <!-- Temperatures -->
    <div class="bg-white p-4 rounded shadow">
        <h2 class="font-semibold mb-2">Temperatures (T)</h2>
        <div id="tempsRow" class="flex gap-1"></div>
        <h3 class="font-semibold mt-4 mb-2">Answer (ans)</h3>
        <div id="ansRow" class="flex gap-1"></div>
    </div>

    <!-- Stack Panel -->
    <div class="bg-white p-4 rounded shadow">
        <h2 class="font-semibold mb-2">Monotonic Stack</h2>
        <div id="stackPanel" class="flex flex-col gap-2"></div>
    </div>

</div>

<!-- Explanation -->
<div class="mt-6 bg-white p-4 rounded shadow">
    <h2 class="font-semibold mb-2">Explanation</h2>
    <div id="explanation" class="text-gray-700"></div>
</div>

<script>
let temps = [];
let steps = [];
let current = 0;

function startVisualization() {
    const raw = document.getElementById("inputTemps").value.trim();
    if (!raw) return;

    temps = raw.split(",").map(x => parseInt(x.trim()));
    buildSteps();
    current = 0;
    renderStep();
}

function buildSteps() {
    steps = [];
    let ans = Array(temps.length).fill(0);
    let stack = [];

    steps.push({
        ans: [...ans],
        stack: [...stack],
        j: -1,
        action: "Initialized arrays and stack."
    });

    for (let j = 0; j < temps.length; j++) {
        let temp = temps[j];

        steps.push({
            ans: [...ans],
            stack: [...stack],
            j,
            action: `Processing T[${j}] = ${temp}`
        });

        while (stack.length && temp > temps[stack[stack.length - 1]]) {
            const i = stack.pop();
            ans[i] = j - i;

            steps.push({
                ans: [...ans],
                stack: [...stack],
                j,
                action: `temp ${temp} > T[${i}] = ${temps[i]} ‚Üí ans[${i}] = ${j - i}`
            });
        }

        stack.push(j);
        steps.push({
            ans: [...ans],
            stack: [...stack],
            j,
            action: `Push index ${j} onto stack`
        });
    }

    steps.push({
        ans: [...ans],
        stack: [...stack],
        j: temps.length,
        action: `Done. All remaining stack entries get 0.`
    });
}

function renderStep() {
    const s = steps[current];
    document.getElementById("stepCounter").innerText = current;

    // Temps Row
    const tr = temps
        .map((t, idx) =>
            `<div class="cell ${idx === s.j ? 'highlight' : ''}">${t}</div>`
        )
        .join("");
    document.getElementById("tempsRow").innerHTML = tr;

    // Ans Row
    const ar = s.ans
        .map(v => `<div class="cell">${v}</div>`)
        .join("");
    document.getElementById("ansRow").innerHTML = ar;

    // Stack Panel
    const sp = s.stack
        .map(i => `<div class="stack-item">index ${i} ‚Üí T[${i}] = ${temps[i]}</div>`)
        .join("");
    document.getElementById("stackPanel").innerHTML = sp;

    // Explanation
    document.getElementById("explanation").innerText = s.action;
}

function nextStep() {
    if (current < steps.length - 1) {
        current++;
        renderStep();
    }
}

function prevStep() {
    if (current > 0) {
        current--;
        renderStep();
    }
}
</script>

</body>
</html>
