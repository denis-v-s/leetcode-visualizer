<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>LC 20 – Valid Parentheses (Interactive)</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { background:#f3f4f6; font-family:Inter,system-ui; }
    .cell { min-width:48px; min-height:48px; display:flex; align-items:center; justify-content:center; border:1px solid #e5e7eb; background:#fff; border-radius:6px; }
    .cell.current { background:#e0f2fe; border-color:#38bdf8; transform:scale(1.08); }
    .panel { background:#fff; border:1px solid #e6e6e6; border-radius:8px; padding:12px; }
    .stack-box { width:40px; height:40px; border:1px solid #e5e7eb; display:flex; align-items:center; justify-content:center; border-radius:4px; background:#fff; }
    .ok { background:#dcfce7; border-color:#86efac; }
    .bad { background:#fee2e2; border-color:#fca5a5; }
  </style>
</head>
<body>
<div id="root" class="p-6 max-w-5xl mx-auto"></div>
<script>
(function(React, ReactDOM){
  const { useState } = React;

  function computeSteps(s){
    const steps = [];
    const pairs = { ')':'(', ']':'[', '}':'{' };
    const stack = [];

    for (let idx=0; idx<s.length; idx++){
      const c = s[idx];

      if (!(c in pairs)){
        stack.push(c);
        steps.push({
          i: idx,
          char: c,
          stack: [...stack],
          action: `Push '${c}' (opening bracket)`
        });
      } else {
        let valid = stack.length>0 && stack[stack.length-1] === pairs[c];
        if (!valid){
          steps.push({
            i: idx,
            char: c,
            stack: [...stack],
            action: `Mismatch → expected '${pairs[c]}'`,
            bad: true
          });
          return steps;
        }
        stack.pop();
        steps.push({
          i: idx,
          char: c,
          stack: [...stack],
          action: `Match '${c}' with '${pairs[c]}'`,
          ok: true
        });
      }
    }

    const finalValid = stack.length===0;
    steps.push({
      i: s.length-1,
      char: '',
      stack: [...stack],
      action: finalValid ? "String is valid" : "Stack not empty → invalid",
      finalValid
    });
    return steps;
  }

  function App(){
    const [s, setS] = useState("()[{}]");
    const [steps, setSteps] = useState([]);
    const [idx, setIdx] = useState(0);

    function load(){
      const st = computeSteps(s);
      setSteps(st);
      setIdx(0);
    }

    function stepForward(){ if (steps.length) setIdx(i=>Math.min(i+1, steps.length-1)); }
    function stepBack(){ if (steps.length) setIdx(i=>Math.max(i-1, 0)); }

    const cur = steps[idx] || {};

    return React.createElement("div", {className:"space-y-6"},
      React.createElement("h1", {className:"text-2xl font-semibold"}, "LC 20 – Valid Parentheses (Interactive)"),

      React.createElement("div", {className:"grid grid-cols-1 md:grid-cols-4 gap-3"},
        React.createElement("input", {className:"p-2 border rounded", value:s, onChange:e=>setS(e.target.value)}),
        React.createElement("button", {className:"bg-blue-600 text-white rounded px-3 py-2", onClick:load}, "Load steps"),
        React.createElement("div", {className:"text-sm text-gray-600"}, steps.length?`Step ${idx+1}/${steps.length}`:"–")
      ),

      React.createElement("div", {className:"flex space-x-3"},
        React.createElement("button", {className:"px-3 py-2 border rounded", onClick:stepBack}, "⟵ Back"),
        React.createElement("button", {className:"px-3 py-2 border rounded", onClick:stepForward}, "Forward ⟶")
      ),

      React.createElement("div", {className:"grid grid-cols-1 md:grid-cols-2 gap-4"},

        React.createElement("div", {className:"panel"},
          React.createElement("h2", {className:"font-medium mb-3"}, "Input Characters"),
          React.createElement("div", {className:"flex flex-wrap gap-2"},
            s.split('').map((c,i)=>{
              const highlight = i === cur.i;
              return React.createElement("div", {
                key:i,
                className:"cell" + (highlight?" current":"")
              },
                React.createElement("div", null,
                  React.createElement("div", null, c),
                  React.createElement("div", {className:"text-xs text-gray-500"}, i)
                )
              );
            })
          ),
          React.createElement("div", {className:"mt-3 text-sm text-gray-600"}, cur.action || "–")
        ),

        React.createElement("div", {className:"panel"},
          React.createElement("h2", {className:"font-medium mb-3"}, "Stack"),
          React.createElement("div", {className:"flex gap-2"},
            (cur.stack || []).map((c,i)=>
              React.createElement("div", {
                key:i,
                className:
                  "stack-box " +
                  (cur.ok && i === cur.stack.length-1?"ok":"") +
                  (cur.bad?"bad":"")
              }, c)
            )
          )
        )
      )
    );
  }

  ReactDOM.createRoot(document.getElementById('root'))
    .render(React.createElement(App));

})(window.React, window.ReactDOM);
</script>
</body>
</html>
